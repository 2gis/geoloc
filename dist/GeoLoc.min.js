!function(){function e(e,t,n){function i(){m=!0,d.onerror=null,clearTimeout(s),delete window[u],d.parentNode.removeChild(d)}n?t||(t={}):(n=t,t={});var r=t.callbackKey||"callback",u=t.callbackName||"__callback"+ ++o,l=t.preventCaching!==!1,c=t.cachingPreventionKey||"noCache",a=t.timeout||12e4,d=document.createElement("script");d.src=e+(-1==e.indexOf("?")?"?":"&")+r+"="+u+(l?"&"+c+"="+Math.random():""),d.async=!0,d.onerror=function(){i(),n(new Error("Script error"),null)};var s=setTimeout(function(){i(),n(new Error("Timeout error"),null)},a);window[u]=function(e){i(),n(null,e)};var m=!1;return(document.head||document.documentElement).appendChild(d),{abort:function(){m||(i(),n(new Error("Aborted"),null))}}}var o=0;window.jsonpRequest={send:e}}(),function(){function e(e){e||(e={}),e.providerTimeout&&(this.providerTimeout=e.providerTimeout),e.maximumAge&&(this.maximumAge=e.maximumAge),this.providers=e.providers||o}var o=[];e.providers={},e.setDefaultProviders=function(t){return o=t,e},e.use=function(o){return new e({providers:o})},e.getPosition=function(o,t){return new e(t).getPosition(o)},e.prototype={constructor:e,providerTimeout:1e4,maximumAge:864e5,providers:null,use:function(e){return this.providers=e,this},getPosition:function(e){var o=localStorage.getItem("_GeoLocData");if(o){o=o.split(",");var t=Number(o[2]);if(Date.now()-t<=this.maximumAge)return e(null,{latitude:Number(o[0]),longitude:Number(o[1])}),this}var n=this.providerTimeout;return function i(o){var t=o.shift();t.getPosition(function(t,n){t?o.length?i(o):e(t,null):"number"!=typeof n.latitude||"number"!=typeof n.longitude?o.length?i(o):e(new TypeError("Incorrect data"),null):(localStorage.setItem("_GeoLocData",[n.latitude,n.longitude,Date.now()].join(",")),e(null,n))},{timeout:n})}(this.providers.slice(0)),this}},window.GeoLoc=e}(),GeoLoc.providers.freegeoip_net={getPosition:function(e,o){jsonpRequest.send("http://freegeoip.net/json/",o&&{timeout:o.timeout},function(o,t){e(o,t&&{latitude:t.latitude,longitude:t.longitude})})}},GeoLoc.providers.telize_com={getPosition:function(e,o){jsonpRequest.send("http://www.telize.com/geoip/",o&&{timeout:o.timeout},function(o,t){e(o,t&&{latitude:t.latitude,longitude:t.longitude})})}},GeoLoc.providers.html5geolocation={getPosition:function(e){navigator.geolocation?navigator.geolocation.getCurrentPosition(function(o){e(null,{latitude:o.coords.latitude,longitude:o.coords.longitude})},function(o){e(o,null)}):e(new TypeError("HTML5 Geolocation not supported"),null)}},GeoLoc.setDefaultProviders([GeoLoc.providers.freegeoip_net,GeoLoc.providers.telize_com,GeoLoc.providers.html5geolocation]);