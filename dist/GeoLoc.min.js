!function(){function e(e,o,n){function i(){m=!0,a.onerror=null,clearTimeout(s),delete window[u],a.parentNode.removeChild(a)}n?o||(o={}):(n=o,o={});var r=o.callbackKey||"callback",u=o.callbackName||"__callback"+ ++t,l=o.preventCaching!==!1,c=o.cachingPreventionKey||"noCache",d=o.timeout||12e4,a=document.createElement("script");a.src=e+(-1==e.indexOf("?")?"?":"&")+r+"="+u+(l?"&"+c+"="+Math.random():""),a.async=!0,a.onerror=function(){i(),n(new Error("Script error"),null)};var s=setTimeout(function(){i(),n(new Error("Timeout error"),null)},d);window[u]=function(e){i(),n(null,e)};var m=!1;return(document.head||document.documentElement).appendChild(a),{abort:function(){m||(i(),n(new Error("Aborted"),null))}}}var t=0;window.jsonpRequest={send:e}}(),function(){"use strict";function e(e){e||(e={}),e.providerTimeout&&(this.providerTimeout=e.providerTimeout),e.maximumAge&&(this.maximumAge=e.maximumAge),this.providers=e.providers||o}var t=function(){return this}(),o=[];e.providers={},e.setDefaultProviders=function(t){return o=t,e},e.use=function(t){return new e({providers:t})},e.getPosition=function(t,o){return new e(o).getPosition(t)},e.prototype={constructor:e,providerTimeout:1e4,maximumAge:864e5,providers:null,use:function(e){return this.providers=e,this},getPosition:function(e){var t=localStorage.getItem("_GeoLocData");if(t){t=t.split(",");var o=Number(t[2]);if(Date.now()-o<=this.maximumAge)return e(null,{latitude:Number(t[0]),longitude:Number(t[1])}),this}var n=this.providerTimeout;return function i(t){var o=t.shift();o.getPosition(function(o,n){o?t.length?i(t):e(o,null):"number"!=typeof n.latitude||"number"!=typeof n.longitude?t.length?i(t):e(new TypeError("Incorrect data"),null):(localStorage.setItem("_GeoLocData",[n.latitude,n.longitude,Date.now()].join(",")),e(null,n))},{timeout:n})}(this.providers.slice(0)),this}},"undefined"!=typeof exports?"undefined"!=typeof module&&module.exports?module.exports=e:exports.GeoLoc=e:t.GeoLoc=e,e.providers.freegeoip_net={getPosition:function(e,t){jsonpRequest.send("http://freegeoip.net/json/",t&&{timeout:t.timeout},function(t,o){e(t,o&&{latitude:o.latitude,longitude:o.longitude})})}},e.providers.telize_com={getPosition:function(e,t){jsonpRequest.send("http://www.telize.com/geoip/",t&&{timeout:t.timeout},function(t,o){e(t,o&&{latitude:o.latitude,longitude:o.longitude})})}},e.providers.html5geolocation={getPosition:function(e){navigator.geolocation?navigator.geolocation.getCurrentPosition(function(t){e(null,{latitude:t.coords.latitude,longitude:t.coords.longitude})},function(t){e(t,null)}):e(new TypeError("HTML5 Geolocation not supported"),null)}},e.setDefaultProviders([e.providers.freegeoip_net,e.providers.telize_com,e.providers.html5geolocation])}();